<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Birthday, My Lovely Bat</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background: linear-gradient(to right, #ffc0cb, #e6e6fa, #add8e6);
        }
        .card {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 2rem;
            max-width: 400px;
            width: 100%;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        h1 {
            color: #ff69b4;
            margin-bottom: 1rem;
        }
        .cake {
            font-size: 5rem;
            margin-bottom: 1rem;
            position: relative;
        }
        .candle {
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            width: 4px;
            height: 20px;
            background-color: #ff4500;
            border-radius: 2px;
        }
        .flame {
            width: 8px;
            height: 8px;
            background-color: #ffff00;
            border-radius: 50%;
            position: absolute;
            top: -8px;
            left: 50%;
            transform: translateX(-50%);
            animation: flicker 0.3s infinite alternate;
        }
        @keyframes flicker {
            0% { transform: translateX(-50%) scale(1); }
            100% { transform: translateX(-50%) scale(0.9); }
        }
        .message, .question, .love-letter {
            margin-bottom: 1rem;
            display: none;
        }
        .icons {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }
        .icon {
            font-size: 2rem;
        }
        button {
            background-color: #ff69b4;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            cursor: pointer;
            transition: background-color 0.3s;
            margin: 0.5rem;
        }
        button:hover {
            background-color: #ff1493;
        }
        input[type="text"] {
            padding: 0.5rem;
            border-radius: 20px;
            border: 1px solid #ccc;
            margin-bottom: 1rem;
        }
        .cute-girl {
            position: absolute;
            width: 100px;
            height: 100px;
        }
        .cute-girl-1 {
            top: -50px;
            left: -50px;
            animation: float 3s ease-in-out infinite;
        }
        .cute-girl-2 {
            bottom: -50px;
            right: -50px;
            animation: float 3s ease-in-out infinite 1.5s;
        }
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }
        .love-letter-options {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }
        .love-letter-option {
            background-color: #ffd1dc;
            border: none;
            padding: 0.25rem 0.5rem;
            border-radius: 10px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .love-letter-option:hover {
            background-color: #ff69b4;
            color: white;
        }
        #loveLetter {
            background-color: #fff0f5;
            border: 2px solid #ff69b4;
            border-radius: 10px;
            padding: 1rem;
            margin-top: 1rem;
            font-style: italic;
        }
    </style>
</head>
<body>
    <div class="card">
        <svg class="cute-girl cute-girl-1" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
            <circle cx="50" cy="50" r="45" fill="#FFB6C1"/>
            <circle cx="35" cy="40" r="5" fill="#000"/>
            <circle cx="65" cy="40" r="5" fill="#000"/>
            <path d="M 40 60 Q 50 70 60 60" stroke="#000" stroke-width="3" fill="none"/>
        </svg>
        <svg class="cute-girl cute-girl-2" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
            <circle cx="50" cy="50" r="45" fill="#FFB6C1"/>
            <circle cx="35" cy="40" r="5" fill="#000"/>
            <circle cx="65" cy="40" r="5" fill="#000"/>
            <path d="M 40 60 Q 50 70 60 60" stroke="#000" stroke-width="3" fill="none"/>
            <path d="M 30 30 Q 50 10 70 30" stroke="#FF69B4" stroke-width="3" fill="none"/>
        </svg>
        <h1>Happy Birthday, My Love!</h1>
        <div class="cake">
            üéÇ
            <div class="candle">
                <div class="flame"></div>
            </div>
        </div>
        <button id="blowButton">Blow out the candle!</button>
        <div id="message" class="message">
            <p>
                My dearest, on this special day, I want you to know how much you mean to me. 
                Your love lights up my world brighter than any candle. Here's to another year 
                of laughter, love, and unforgettable moments together.
            </p>
            <div class="icons">
                <span class="icon">‚ù§Ô∏è</span>
                <span class="icon">üéÅ</span>
                <span class="icon">üéµ</span>
            </div>
        </div>
        <div id="question" class="question">
            <p>What's your favorite memory of us together?</p>
            <input type="text" id="memoryInput" placeholder="Type your answer here">
            <button id="submitMemory">Submit</button>
        </div>
        <div id="loveLetter" class="love-letter">
            <h2>Create Your Love Letter</h2>
            <p>Select words to create a special love letter:</p>
            <div class="love-letter-options" id="loveLetterOptions"></div>
            <div id="generatedLetter"></div>
        </div>
        <button id="nextButton" style="display: none;">Next</button>
        <button id="celebrateButton" style="display: none;">Celebrate More!</button>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <script>
        const blowButton = document.getElementById('blowButton');
        const celebrateButton = document.getElementById('celebrateButton');
        const nextButton = document.getElementById('nextButton');
        const message = document.getElementById('message');
        const question = document.getElementById('question');
        const loveLetter = document.getElementById('loveLetter');
        const flame = document.querySelector('.flame');
        const candle = document.querySelector('.candle');
        const memoryInput = document.getElementById('memoryInput');
        const submitMemory = document.getElementById('submitMemory');
        const loveLetterOptions = document.getElementById('loveLetterOptions');
        const generatedLetter = document.getElementById('generatedLetter');

        let currentStep = 0;
        const steps = ['message', 'question', 'loveLetter'];

        blowButton.addEventListener('click', () => {
            flame.style.animation = 'none';
            setTimeout(() => {
                candle.style.display = 'none';
                message.style.display = 'block';
                blowButton.style.display = 'none';
                nextButton.style.display = 'inline-block';
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
            }, 1000);
        });

        nextButton.addEventListener('click', () => {
            document.getElementById(steps[currentStep]).style.display = 'none';
            currentStep++;
            if (currentStep < steps.length) {
                document.getElementById(steps[currentStep]).style.display = 'block';
                if (currentStep === 2) {
                    initializeLoveLetter();
                }
            } else {
                nextButton.style.display = 'none';
                celebrateButton.style.display = 'inline-block';
            }
        });

        submitMemory.addEventListener('click', () => {
            const memory = memoryInput.value;
            if (memory) {
                alert(`That's a beautiful memory! I love that you remember ${memory}. It means so much to me too!`);
                nextButton.click();
            } else {
                alert('Please share a memory with me!');
            }
        });

        celebrateButton.addEventListener('click', () => {
            confetti({
                particleCount: 100,
                spread: 70,
                origin: { y: 0.6 }
            });
        });

        function initializeLoveLetter() {
            const words = [
                'love', 'heart', 'forever', 'smile', 'laugh', 'joy',
                'beautiful', 'amazing', 'wonderful', 'precious', 'cherish',
                'adore', 'treasure', 'soulmate', 'partner', 'adventure',
                'memories', 'future', 'together', 'always'
            ];

            words.forEach(word => {
                const button = document.createElement('button');
                button.textContent = word;
                button.classList.add('love-letter-option');
                button.addEventListener('click', () => addToLetter(word));
                loveLetterOptions.appendChild(button);
            });
        }

        function addToLetter(word) {
            const currentText = generatedLetter.textContent;
            generatedLetter.textContent = currentText ? `${currentText} ${word}` : word;
        }
    </script>
</body>
</html>